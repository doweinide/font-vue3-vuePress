name: Build and Deploy to GitHub Pages # ğŸ“› å·¥ä½œæµç¨‹åç§°

on:
  push:
    branches:
      - master # ğŸŸ¢ master åˆ†æ”¯æœ‰æäº¤å°±è§¦å‘

permissions:
  contents: read # å…è®¸è¯»å–ä»“åº“å†…å®¹
  pages: write # å…è®¸å†™å…¥ GitHub Pagesï¼ˆå¿…é¡»ï¼‰
  id-token: write # èº«ä»½éªŒè¯ï¼ˆæ–°ç‰ˆ Pages è¦æ±‚ï¼‰

jobs:
  build: # ğŸ› ï¸ æ„å»ºé¡¹ç›®
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4 # ğŸ” æ£€å‡ºæºç 

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 18 # ğŸ¯ ä½¿ç”¨ Node 18

      - run: npm install # ğŸ“¦ å®‰è£…ä¾èµ–
      - run: npm run build # ğŸ”§ æ„å»ºé¡¹ç›®ï¼ˆè¾“å‡ºåˆ° dist æˆ– vuepress ç›®å½•ï¼‰

      - name: Upload artifact for Pages
        uses: actions/upload-pages-artifact@v2 # âœ… ä½¿ç”¨ GitHub Pages ä¸“ç”¨ä¸Šä¼ æ–¹å¼
        with:
          path: ./docs/.vuepress/dist # âš ï¸ æ”¹æˆä½ çš„æ„å»ºè¾“å‡ºè·¯å¾„

  deploy: # ğŸš€ å‘å¸ƒåˆ° Pages
    needs: build
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }} # ğŸŒ è·å–éƒ¨ç½²åçš„é“¾æ¥

    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v2 # âœ… å®˜æ–¹ Pages å‘å¸ƒæ’ä»¶

